<%- contentFor('extra_css') %>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    .card-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .btn-add {
      background: #28a745;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      color: white;
      font-size: 14px;
    }

    .btn-remove {
      background: #dc3545;
      border: none;
      padding: 5px 10px;
      border-radius: 3px;
      color: white;
      font-size: 12px;
    }

    .dynamic-section {
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      background: #f8f9fa;
    }

    .submenu-section {
      border: 1px solid #d0d0d0;
      border-radius: 5px;
      padding: 10px;
      margin-top: 10px;
      background: #ffffff;
    }

    .social-link-section {
      border: 1px solid #d0d0d0;
      border-radius: 5px;
      padding: 10px;
      margin-top: 10px;
      background: #ffffff;
    }
  </style>

  <%- contentFor('content') %>
    <div class="container-fluid py-4">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="card shadow-lg border-0">
            <div class="card-header">
              <h4 class="mb-0"><i class="fas fa-plus-circle me-2"></i>Add Header Configuration</h4>
            </div>
            <div class="card-body">
              <form action="/admin/header/add" method="POST" id="headerForm" enctype="multipart/form-data">

                <!-- Header Visibility -->
                <div class="row mb-4">
                  <div class="col-md-6">
                    <div class="form-check form-switch">
                      <input class="form-check-input" type="checkbox" id="headerVisible" name="visible" checked>
                      <label class="form-check-label fw-bold" for="headerVisible">
                        <i class="fas fa-eye me-1"></i>Header Visible
                      </label>
                    </div>
                  </div>
                </div>

                <!-- Header Name -->
                <div class="col-md-5 mb-4">
                  <label class="form-label fw-bold">Header Name</label>
                  <input type="text" class="form-control" name="name" placeholder="Header Name" required>
                </div>

                <!-- Logo Section -->
                <div class="card mb-4">
                  <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="fas fa-image me-2"></i>Logo Section</h5>
                  </div>
                  <div class="card-body">
                    <div class="row">
                      <div class="col-md-8 mb-3">
                        <label class="form-label fw-bold">Logo</label>
                        <input type="file" class="form-control" name="headerlogo" accept="image/*">
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Topbar Section -->
                <div class="card mb-4">
                  <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Top Bar Section</h5>
                  </div>
                  <div class="card-body">
                    <!-- Topbar Visibility -->
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <div class="form-check form-switch">
                          <input class="form-check-input" type="checkbox" id="topbarVisible" name="topbar[visible]" checked>
                          <label class="form-check-label fw-bold" for="topbarVisible">
                            <i class="fas fa-eye me-1"></i>Topbar Visible
                          </label>
                        </div>
                      </div>
                    </div>

                    <!-- Opening Hours -->
                    <div class="row mb-3">
                      <div class="col-md-4 mb-3">
                        <label class="form-label fw-bold">Opening Hours Label</label>
                        <input type="text" class="form-control" name="topbar[openingHours][label]" placeholder="Opening Hours">
                      </div>
                      <div class="col-md-4 mb-3">
                        <label class="form-label fw-bold">Opening Hours Value</label>
                        <input type="text" class="form-control" name="topbar[openingHours][value]" placeholder="Monâ€“Sat : 8am to 9pm">
                      </div>
                      <div class="col-md-4 mb-3">
                        <div class="form-check form-switch mt-4">
                          <input class="form-check-input" type="checkbox" id="openingHoursVisible" name="topbar[openingHours][visible]" checked>
                          <label class="form-check-label fw-bold" for="openingHoursVisible">Opening Hours Visible</label>
                        </div>
                      </div>
                    </div>

                    <!-- Social Links -->
                    <div class="mb-3">
                      <div class="d-flex justify-content-between align-items-center mb-2">
                        <label class="form-label fw-bold mb-0">Social Links</label>
                        <button type="button" class="btn-add btn-sm" onclick="addSocialLink()">
                          <i class="fas fa-plus me-1"></i>Add Social Link
                        </button>
                      </div>
                      <div id="socialLinksContainer">
                        <!-- Social links will be added here -->
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Menu Section -->
                <div class="card mb-4">
                  <div class="card-header bg-success text-white">
                    <div class="d-flex justify-content-between align-items-center">
                      <h5 class="mb-0"><i class="fas fa-bars me-2"></i>Navigation Menu</h5>
                      <button type="button" class="btn-add" onclick="addMenuItem()">
                        <i class="fas fa-plus me-1"></i>Add Menu Item
                      </button>
                    </div>
                  </div>
                  <div class="card-body">
                    <div id="menuContainer">
                      <!-- Menu items will be added dynamically -->
                    </div>
                  </div>
                </div>

                <!-- CTA Section -->
                <div class="card mb-4">
                  <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="fas fa-mouse-pointer me-2"></i>Call to Action (CTA)</h5>
                  </div>
                  <div class="card-body">
                    <div class="row">
                      <div class="col-md-3 mb-3">
                        <label class="form-label fw-bold">CTA Placeholder</label>
                        <input type="text" class="form-control" name="cta[placeholder]" placeholder="Enter your email">
                      </div>
                      <div class="col-md-3 mb-3">
                        <label class="form-label fw-bold">CTA Info Text</label>
                        <input type="text" class="form-control" name="cta[infoText]" placeholder="Subscribe Now">
                      </div>
                      <div class="col-md-3 mb-3">
                        <label class="form-label fw-bold">CTA Link</label>
                        <input type="text" class="form-control" name="cta[link]" placeholder="/signup">
                      </div>
                      <div class="col-md-3 mb-3">
                        <div class="form-check form-switch mt-4">
                          <input class="form-check-input" type="checkbox" id="ctaVisible" name="cta[visible]" checked>
                          <label class="form-check-label fw-bold" for="ctaVisible">CTA Visible</label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Address Section -->
                <div class="card mb-4">
                  <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="fas fa-map-marker-alt me-2"></i>Address Section</h5>
                  </div>
                  <div class="card-body">
                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label class="form-label fw-bold">Address Label</label>
                        <input type="text" class="form-control" name="address[lable]" placeholder="Address">
                      </div>
                      <div class="col-md-5 mb-3">
                        <label class="form-label fw-bold">Address Value</label>
                        <input type="text" class="form-control" name="address[value]" placeholder="123 Main Street, City, Country">
                      </div>
                      <div class="col-md-3 mb-3">
                        <div class="form-check form-switch mt-4">
                          <input class="form-check-input" type="checkbox" id="addressVisible" name="address[visible]" checked>
                          <label class="form-check-label fw-bold" for="addressVisible">Address Visible</label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Contact Section -->
                <div class="card mb-4">
                  <div class="card-header bg-dark text-white">
                    <h5 class="mb-0"><i class="fas fa-phone me-2"></i>Contact Section</h5>
                  </div>
                  <div class="card-body">
                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label class="form-label fw-bold">Contact Label</label>
                        <input type="text" class="form-control" name="contact[lable]" placeholder="Phone">
                      </div>
                      <div class="col-md-5 mb-3">
                        <label class="form-label fw-bold">Contact Value</label>
                        <input type="text" class="form-control" name="contact[value]" placeholder="+1 234 567 8900">
                      </div>
                      <div class="col-md-3 mb-3">
                        <div class="form-check form-switch mt-4">
                          <input class="form-check-input" type="checkbox" id="contactVisible" name="contact[visible]" checked>
                          <label class="form-check-label fw-bold" for="contactVisible">Contact Visible</label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Form Actions -->
                <div class="text-center">
                  <button type="submit" class="btn btn-primary btn-lg px-5">
                    <i class="fas fa-save me-2"></i>Save Header Configuration
                  </button>
                  <a href="/admin/configurations" class="btn btn-secondary btn-lg px-5 ms-3">
                    <i class="fas fa-times me-2"></i>Cancel
                  </a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%- contentFor('extra_javascript') %>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
      <script>
        let menuItemIndex = 0;
        let socialLinkIndex = 0;

        function addSocialLink() {
          const container = document.getElementById('socialLinksContainer');
          const socialDiv = document.createElement('div');
          socialDiv.className = 'social-link-section mb-2';
          socialDiv.innerHTML = `
            <div class="row">
              <div class="col-md-4 mb-2">
                <label class="form-label fw-bold">Social Icon</label>
                <select class="form-control" name="topbar[socialLinks][${socialLinkIndex}][icon]">
                  <option value="facebook">Facebook</option>
                  <option value="twitter">Twitter</option>
                  <option value="instagram">Instagram</option>
                  <option value="linkedin">LinkedIn</option>
                  <option value="youtube">YouTube</option>
                  <option value="pinterest">Pinterest</option>
                  <option value="tiktok">TikTok</option>
                </select>
              </div>
              <div class="col-md-5 mb-2">
                <label class="form-label fw-bold">Social Link URL</label>
                <input type="text" class="form-control" name="topbar[socialLinks][${socialLinkIndex}][link]" placeholder="https://facebook.com/yourpage">
              </div>
              <div class="col-md-2 mb-2">
                <div class="form-check form-switch mt-4">
                  <input class="form-check-input" type="checkbox" name="topbar[socialLinks][${socialLinkIndex}][visible]" checked>
                  <label class="form-check-label fw-bold">Visible</label>
                </div>
              </div>
              <div class="col-md-1 mb-2">
                <button type="button" class="btn-remove btn-sm mt-4" onclick="this.closest('.social-link-section').remove()">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>
          `;
          container.appendChild(socialDiv);
          socialLinkIndex++;
        }

        function addMenuItem() {
          const container = document.getElementById('menuContainer');
          const menuDiv = document.createElement('div');
          menuDiv.className = 'dynamic-section';
          menuDiv.innerHTML = `
            <div class="row">
              <div class="col-md-4 mb-3">
                <label class="form-label fw-bold">Menu Name</label>
                <input type="text" class="form-control" name="menu[${menuItemIndex}][name]" placeholder="Home" required>
              </div>
              <div class="col-md-4 mb-3">
                <label class="form-label fw-bold">Menu Link</label>
                <input type="text" class="form-control" name="menu[${menuItemIndex}][link]" placeholder="/" required>
              </div>
              <div class="col-md-2 mb-3">
                <div class="form-check form-switch mt-4">
                  <input class="form-check-input" type="checkbox" name="menu[${menuItemIndex}][visible]" checked>
                  <label class="form-check-label fw-bold">Visible</label>
                </div>
              </div>
              <div class="col-md-2 mb-3">
                <button type="button" class="btn-remove mt-4" onclick="this.closest('.dynamic-section').remove()">
                  <i class="fas fa-trash"></i> Remove
                </button>
              </div>
            </div>
            
            <!-- Submenu Section -->
            <div class="mb-3">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <label class="form-label fw-bold mb-0">Submenu Items</label>
                <button type="button" class="btn-add btn-sm" onclick="addSubmenuItem(${menuItemIndex}, this)">
                  <i class="fas fa-plus me-1"></i>Add Submenu
                </button>
              </div>
              <div class="submenu-container-${menuItemIndex}">
                <!-- Submenu items will be added here -->
              </div>
            </div>
          `;
          container.appendChild(menuDiv);
          menuItemIndex++;
        }

        function addSubmenuItem(menuIndex, button) {
          const container = document.querySelector(`.submenu-container-${menuIndex}`);
          const submenuCount = container.children.length;

          const submenuDiv = document.createElement('div');
          submenuDiv.className = 'submenu-section mb-2';
          submenuDiv.innerHTML = `
            <div class="row">
              <div class="col-md-4 mb-2">
                <label class="form-label fw-bold">Submenu Name</label>
                <input type="text" class="form-control" name="menu[${menuIndex}][submenu][${submenuCount}][name]" placeholder="Submenu Item">
              </div>
              <div class="col-md-4 mb-2">
                <label class="form-label fw-bold">Submenu Link</label>
                <input type="text" class="form-control" name="menu[${menuIndex}][submenu][${submenuCount}][link]" placeholder="/submenu">
              </div>
              <div class="col-md-2 mb-2">
                <div class="form-check form-switch mt-4">
                  <input class="form-check-input" type="checkbox" name="menu[${menuIndex}][submenu][${submenuCount}][visible]" checked>
                  <label class="form-check-label fw-bold">Visible</label>
                </div>
              </div>
              <div class="col-md-2 mb-2">
                <button type="button" class="btn-remove btn-sm mt-4" onclick="this.closest('.submenu-section').remove()">
                  <i class="fas fa-trash"></i> Remove
                </button>
              </div>
            </div>
          `;
          container.appendChild(submenuDiv);
        }

        // Add initial menu item on page load
        document.addEventListener('DOMContentLoaded', function () {
          addMenuItem();
        });
      </script>